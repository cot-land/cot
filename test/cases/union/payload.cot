// Union with payloads
// EXPECT: exit_code=0

union Result { Ok: i64, Err: i32 }

fn main() i64 {
    // Init with payload
    let r: Result = Result.Ok(42)

    // Tag check
    if r.tag != 0 { return 1 }

    // Payload extraction
    let val = r.Ok
    if val != 42 { return 2 }

    // Different variant
    let e: Result = Result.Err(99)
    if e.tag != 1 { return 3 }

    return 0
}
