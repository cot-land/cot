// Test extern fn declarations and calls
// These extern fn names match runtime function names in func_indices

extern fn time() i64

test "extern fn call" {
    const t = time()
    @assert(t > 0)
}

extern fn alloc(metadata: i64, size: i64) i64
extern fn dealloc(ptr: i64) void

test "extern fn alloc/dealloc" {
    const ptr = alloc(0, 64)
    @assert(ptr > 0)
    dealloc(ptr)
}

extern fn fd_write(fd: i64, ptr: i64, len: i64) i64

test "extern fn fd_write" {
    const msg = "extern fn works\n"
    const n = fd_write(1, @ptrOf(msg), @lenOf(msg))
    @assert(n > 0)
}
